# v0.10.0 学生注册和公开页面浏览功能 - 快速开始

## 📦 本次更新内容

1. **学生自主注册功能** - 新用户可以自己注册账号
2. **公开页面浏览功能** - 未登录用户可以浏览部分内容

---

## 🚀 快速部署（5步）

### 步骤1: 数据库更新（如果尚未执行）

执行以下SQL（如果已添加则跳过）：

```sql
-- 检查字段是否存在
DESC sys_user;

-- 如果没有student_id和gender字段，执行以下SQL：
ALTER TABLE sys_user ADD COLUMN student_id VARCHAR(20) COMMENT '学号' AFTER email;
ALTER TABLE sys_user ADD COLUMN gender TINYINT(1) COMMENT '性别:1=男,2=女' AFTER student_id;
```

### 步骤2: 后端部署

```bash
# 进入后端目录
cd club-system

# 清理编译
mvn clean compile

# 打包部署（根据你的部署方式）
# 方式1: 如果使用Tomcat
mvn clean package
# 然后将war文件部署到Tomcat的webapps目录

# 方式2: 如果有Spring Boot插件
# mvn spring-boot:run
```

### 步骤3: 前端部署

```bash
# 进入前端目录
cd club_web

# 安装依赖（如果已安装可跳过）
npm install

# 启动开发服务器
npm run dev
```

### 步骤4: 访问测试

打开浏览器访问：
- 前端地址: http://localhost:5173
- 后端地址: http://localhost:8080

### 步骤5: 功能验证

1. 访问首页，应该看到公开门户页面
2. 点击"注册"按钮，测试注册功能
3. 注册一个测试账号并登录

---

## 📁 新增/修改文件列表

### 后端文件（6个修改）
```
club-system/src/main/java/com/tlh/club_system/
├── entity/User.java (修改：添加studentId和gender字段)
├── mapper/UserMapper.java (修改：添加countByUsername方法)
├── service/UserService.java (修改：添加注册相关方法)
├── service/impl/UserServiceImpl.java (修改：实现注册逻辑)
├── controller/UserController.java (修改：添加注册接口)
└── config/WebConfig.java (修改：添加拦截器配置)
```

### 前端文件（5个：2新建+3修改）
```
club_web/src/
├── views/Register.vue (新建：注册页面)
├── views/PublicLanding.vue (新建：公开门户页面)
├── views/Login.vue (修改：添加注册入口)
└── router/index.js (修改：添加路由和守卫)
```

### 文档文件（4个新建）
```
项目根目录/
├── 学生注册和公开页面浏览功能开发文档-v0.10.0.md
├── 学生注册和公开页面功能-快速测试指南-v0.10.0.md
├── 学生注册和公开页面浏览-用户使用手册-v0.10.0.md
├── 学生注册和公开页面浏览功能开发完成总结-v0.10.0.md
└── README-v0.10.0快速开始.md (本文档)
```

---

## ✅ 功能检查清单

部署后请检查以下功能：

### 注册功能
- [ ] 访问 `/register` 显示注册页面
- [ ] 表单验证正常工作
- [ ] 可以成功注册新用户
- [ ] 注册后可以登录
- [ ] 用户名重复检测有效

### 公开页面
- [ ] 未登录访问 `/` 跳转到 `/public`
- [ ] 公开门户页面显示正常
- [ ] 可以访问 `/portal/clubs` 社团黄页
- [ ] 可以访问 `/portal/calendar` 活动日历
- [ ] 访问需登录页面自动跳转 `/login`

### 后端API
- [ ] `POST /api/auth/register` 注册接口可用
- [ ] `GET /api/club/list` 无需登录可访问
- [ ] 其他受保护接口需要登录

---

## 🧪 快速测试（3分钟）

### 测试1: 注册功能（1分钟）
1. 访问 http://localhost:5173/register
2. 填写测试数据：
   - 用户名: `test001`
   - 密码: `123456`
   - 真实姓名: `测试用户`
   - 学号: `2024001`
   - 性别: 男
3. 点击注册
4. **预期**: 显示"注册成功"，跳转登录页

### 测试2: 公开页面（1分钟）
1. 清除localStorage（退出登录）
2. 访问 http://localhost:5173/
3. **预期**: 显示公开门户页面
4. 点击"浏览社团"
5. **预期**: 可以看到社团列表

### 测试3: 权限控制（1分钟）
1. 未登录状态访问 http://localhost:5173/home
2. **预期**: 自动跳转到登录页
3. 使用刚注册的账号登录
4. **预期**: 登录成功，可以访问所有功能

---

## 📚 文档说明

### 1. 开发文档（技术人员阅读）
- **文件名**: `学生注册和公开页面浏览功能开发文档-v0.10.0.md`
- **内容**: 详细的技术实现、API接口、数据库设计
- **适用**: 开发人员、技术负责人

### 2. 测试指南（测试人员使用）
- **文件名**: `学生注册和公开页面功能-快速测试指南-v0.10.0.md`
- **内容**: 完整的测试流程、验证点、缺陷记录
- **适用**: 测试人员、QA工程师

### 3. 用户手册（最终用户阅读）
- **文件名**: `学生注册和公开页面浏览-用户使用手册-v0.10.0.md`
- **内容**: 注册指南、使用说明、常见问题
- **适用**: 学生、普通用户

### 4. 完成总结（管理层查看）
- **文件名**: `学生注册和公开页面浏览功能开发完成总结-v0.10.0.md`
- **内容**: 开发成果、统计数据、验收标准
- **适用**: 项目经理、管理人员

---

## ⚠️ 重要提醒

### 1. 数据库字段必须添加
确保 `sys_user` 表有 `student_id` 和 `gender` 字段，否则注册会失败。

### 2. 密码安全
当前版本密码是明文存储，**生产环境建议加密**：
- 使用BCrypt或其他加密算法
- 修改 `UserServiceImpl` 的 `register` 和 `login` 方法

### 3. 后端部署
根据你的实际部署方式：
- 如果使用Tomcat: 打包war文件部署
- 如果使用内嵌服务器: 需要添加Spring Boot插件
- 检查端口配置是否正确

### 4. 前端配置
确认 `club_web/src/utils/request.js` 中的后端地址配置正确。

---

## 🐛 常见问题

### Q1: 注册后报错"注册失败"
**排查步骤**:
1. 检查数据库是否有 `student_id` 和 `gender` 字段
2. 查看后端控制台日志
3. 检查数据库连接是否正常

### Q2: 公开页面无法访问
**排查步骤**:
1. 检查后端 `WebConfig.java` 拦截器配置
2. 检查前端路由守卫逻辑
3. 清除浏览器缓存后重试

### Q3: 后端编译失败
**可能原因**:
- JDK版本不对（需要JDK 17+）
- Maven依赖下载失败
- 代码语法错误

**解决方法**:
```bash
# 清理并重新编译
mvn clean compile

# 如果依赖下载失败
mvn clean install -U
```

---

## 📞 获取帮助

如遇到问题：
1. **查看开发文档** - 技术实现细节
2. **查看测试指南** - 测试验证流程
3. **查看用户手册** - 使用说明
4. **查看完成总结** - 整体情况

---

## 🎉 开始使用

现在你可以：
1. 按照上述步骤部署系统
2. 使用测试指南验证功能
3. 将用户手册分发给学生
4. 开始使用新功能！

---

**版本**: v0.10.0  
**更新日期**: 2025-12-27  
**开发者**: AI Assistant  

**祝使用愉快！**
